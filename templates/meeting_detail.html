{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}
    <article>
        <h2>{{ meeting.title }}</h2>
        <p>
            <strong>Meeting Date:</strong> {{ meeting.meeting_date.strftime('%Y-%m-%d') }} <br>
            <strong>Recorded By:</strong> {{ meeting.author.username }} <br>
            <strong>Date Recorded:</strong> {{ meeting.date_posted.strftime('%Y-%m-%d %H:%M') }}
        </p>

        {% if meeting.attendees %}
        <section>
            <h3>Attendees</h3>
            <pre>{{ meeting.attendees }}</pre> </section>
        {% endif %}

        <section>
            <h3>Agenda</h3>
            {% if agenda_list %}
                <ul> 
                    {% for item in agenda_list %}
                        <li>{{ item }}</li> 
                    {% endfor %}
                </ul>
            {% else %}
                <p>N/A</p>
            {% endif %}
        </section>

        {% if meeting.minutes %}
        <section>
            <h3>Minutes</h3>
            <pre>{{ meeting.minutes }}</pre>
        </section>
        {% endif %}

         {% if meeting.action_items %}
        <section>
            <h3>Action Items</h3>
            <pre>{{ meeting.action_items }}</pre>
        </section>
        {% endif %}

    </article>
    <hr>

    <p>
        <a href="{{ url_for('generate_meeting_pdf', meeting_id=meeting.id) }}">Generate PDF</a> |
        <a href="{{ url_for('edit_meeting', meeting_id=meeting.id) }}">Edit Meeting</a> |

        {# --- Start Delete Form --- #}
        <form method="POST" action="{{ url_for('delete_meeting', meeting_id=meeting.id) }}" style="display:inline; margin: 0; padding: 0;">
            <input type="submit" value="Delete Meeting"
                   class="btn btn-danger btn-sm" {# Optional classes for styling #}
                   onclick="return confirm('Are you sure you want to delete this meeting? This cannot be undone.');">
        </form>
        {# --- End Delete Form --- #}
         |
        <a href="{{ url_for('meetings_list') }}">Back to My Meetings</a>
    </p>

    {% endblock %}
